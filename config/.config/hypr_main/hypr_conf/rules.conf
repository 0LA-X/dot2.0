# ----------------------------------
#   ____  _   _ _     _____ ____  
#  |  _ \| | | | |   | ____/ ___| 
#  | |_) | | | | |   |  _| \___ \ 
#  |  _ <| |_| | |___| |___ ___) |
#  |_| \_\\___/|_____|_____|____/ 
#
# ---------------------------------
windowrule = opaque, class:foot|equibop|kitty  # They use native transparency

# Disable blur for XWayland windows 
windowrulev2 = noblur, xwayland:1

# ------------------------
## [  Floating Windows ]
# ------------------------
windowrulev2 = float, class:^(steam)$

windowrule = float, class:foot, title:nmtui
windowrule = size 75% 70%, class:foot, title:nmtui
windowrule = center 1, class:foot, title:nmtui
windowrule = float, class:org\.gnome\.Settings
windowrule = size 70% 80%, class:org\.gnome\.Settings
windowrule = center 1, class:org\.gnome\.Settings
windowrule = float, class:org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = size 60% 70%, class:org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = center 1, class:org\.pulseaudio\.pavucontrol|yad-icon-browser
windowrule = float, class:nwg-look
windowrule = size 50% 60%, class:nwg-look
windowrule = center 1, class:nwg-look


# Blueman (Bluetooth Manager) - Center + Float
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = center, class:^(blueman-manager)$
windowrulev2 = size 800 600, class:^(blueman-manager)$  # Adjust size as needed

# [ nmtui-popup ]
windowrulev2 = float, class:^nmtui-popup$
windowrulev2 = center, class:^nmtui-popup$
windowrulev2 = size 70% 70%, class:^nmtui-popup$

# [ Steam ]
windowrule = rounding 10, title:, class:steam
windowrule = float, title:Friends List, class:steam
windowrule = immediate, class:steam_app_[0-9]+  # Allow tearing for steam games
windowrule = idleinhibit always, class:steam_app_[0-9]+  # Always idle inhibit when playing a steam game

# [ Picture-in-Picture ]
windowrulev2 = float, title:^(Picture-in-Picture|PiP)$
windowrulev2 = pin, title:^(Picture-in-Picture|PiP)$  # Keeps it above other windows (optional)
windowrulev2 = move 75%-25 75%-25, title:^(Picture-in-Picture|PiP)$  # Bottom-right (adjust offsets)
windowrulev2 = size 25% 25%, title:^(Picture-in-Picture|PiP)$  # Default size (adjust % as needed)

# [ Dialog Windows ]
windowrulev2 = float, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$
windowrulev2 = center, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$
windowrulev2 = size 800 600, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$
windowrulev2 = minsize 400 300, class:^(.*)$, title:^(Open File|Select a File|Save As|File Upload|Open Folder|Library)(.*)$

# [ Archive extraction dialogs - Center + Float ] 
windowrulev2 = float, title:^(Extract|Extract Here|Extract to Folder|Archive Extractor)(.*)$
windowrulev2 = center, title:^(Extract|Extract Here|Extract to Folder|Archive Extractor)(.*)$
windowrulev2 = size 800 600, title:^(Extract|Extract Here|Extract to Folder|Archive Extractor)(.*)$

# [ Generic GTK/Qt dialogs (fallback) ] 
windowrulev2 = float, class:^(.*)(dialog|Dialog)(.*)$
windowrulev2 = center, class:^(.*)(dialog|Dialog)(.*)$
windowrulev2 = size 800 600, class:^(.*)(dialog|Dialog)(.*)$

# --- Tearing ---
windowrulev2 = immediate, title:.*\.exe

# No shadow for tiled windows (matches windows that are not floating).
windowrulev2 = noshadow, floating:0

# ------ Workspace rules ------
workspace = special:special, gapsout:30
workspace = w[tv1]s[false], gapsout:10,
workspace = f[1]s[false], gapsout:10, 

#################
## Layer rules ##
#################
layerrule = xray 1, .*
layerrule = noanim, hyprpicker

layerrule = noanim, noanim
layerrule = blur, gtk-layer-shell
layerrule = ignorezero, gtk-layer-shell
layerrule = blur, launcher
layerrule = ignorealpha 0.5, launcher
layerrule = blur, notifications
layerrule = ignorealpha 0.69, notifications
layerrule = blur, logout_dialog # wlogout

# --------------
#  Transparency  
# --------------          
$in = 0.85
$out = 0.90

windowrule = opacity 0.85 $out,class:^(kitty)$
windowrule = opacity $in $out,class:^(com.mitchellh.ghostty)$

windowrule = opacity 0.90 0.80,class:^(zen)$
windowrule = opacity $in $out,class:^(org.gnome.Nautilus)$
windowrule = opacity $in $out,class:^(spotify)$
windowrule = opacity $in $out,class:^(obsidian)$

# [ Blur for Waybar]
layerrule = blur, waybar
layerrule = ignorezero, waybar
layerrule = ignorealpha 0.5, waybar

# [Swaync Tweak for blur]
layerrule = blur, swaync-control-center
layerrule = blur, swaync-notification-window
layerrule = ignorealpha 0.5, swaync-control-center
layerrule = ignorealpha 0.5, swaync-notification-window
